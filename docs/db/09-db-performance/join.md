---
layout: default
title: 조인, 서브쿼리
parent: 9. DB 성능
grand_parent: DB (데이터베이스)
nav_order: 6
---

# 조인(JOIN), 서브쿼리(Sub Query)
{: .fs-8 }

9.6 조인 연산
{: .label .label-purple }

---

## 핵심 키워드

**조인:** `내부 조인` `외부 조인`

**서브쿼리:** `스칼라 서브쿼리` `인라인 뷰`

---

## 정의/개념

| 구분 | 정의 |
|:-----|:-----|
| **조인** | 두 개 이상의 테이블을 공통된 열을 기준으로 연결하여 하나의 결과 집합을 생성하는 연산 |
| **서브쿼리** | 하나의 쿼리 안에 다른 쿼리가 포함된 구조를 가진 쿼리 |

---

## 구조측면의 조인(JOIN)과 서브쿼리(Sub Query)의 차이

| 구분 | 조인(JOIN) | 서브쿼리(Sub Query) |
|:-----|:-----------|:--------------------|
| **관련집합의 영속성** | 테이블: 영속적 스키마, 영속적 데이터<br>뷰: 영속적 스키마, 한시적 데이터 | 서브쿼리: 한시적 스키마, 한시적 데이터 (SQL 실행중에만 테이터가 한시적으로 존재함) |
| **관련집합의 관계성** | 조인에 참여하는 모든 테이블, 뷰는 서로 대등한 관계 | 메인쿼리(Main, 주(主))가 서브쿼리(Sub, 부(副))를 포함하는 종속적 관계 |
| **관련집합의 구조성** | Driving-Driven<br>Product (m * n) | Main-Sub<br>Product(m * 1) |
| **관련집합의 사용성** | 조인에 참여하는 모든 테이블의 칼럼을 어느 위치에서라도 자유롭게 사용 | 서브쿼리: 메인쿼리의 칼럼 모두사용<br>메인쿼리: 서브쿼리의 칼럼 제한적사용 (인라인 뷰의 경우 사용가능) |

---

## 사용측면의 조인(JOIN)과 서브쿼리(Sub Query)의 차이

| 구분 | 조인(JOIN) | 서브 쿼리(Sub Query) |
|:-----|:-----------|:--------------------|
| **연산 비용** | 테이블의 경우 데이터 셋은 이미 생성되어 있어 별도 연산비용 불발생함 | 데이터 셋을 생성하기 위해 매번 SELECT 문이 실행되므로 연산비용이 높은 경향 (내용이 복잡할수록 비용이 증) |
| **데이터 I/O 비용** | 테이블의 경우 데이터 셋은 이미 생성되어 있어 이를 위한 별도 데이터 I/O 비용 발생안함 | 서브 쿼리의 결과 데이터 셋의 양이 크면 연산결과를 저장소에 쓰는 비용발생 |
| **최적화 불능** | Index 사용 가능<br>Constraint 사용 가능 | 서브 쿼리의 결과 집합에는 인덱스나 제약조건이 없음 |
| **동작 방식** | 실행 우선 순위(Ranking) | Order by 사용불가 |

{: .highlight }
> 서브 쿼리는 비기능적인 관점에서보면 테이블에 비해 성능이 떨어지는 경향이 있다. 조인과 서브 쿼리의 사용측면 차이는 서브 쿼리가 데이터의 실체를 저장하지 않고 있다는 점에 기인하며, 이러한 차이점으로 인해 서브 쿼리를 사용할 때는 성능 리스크를 고려한 적절한 유형 선택이 필요함.

---

## 연계 토픽

- [서브쿼리](/docs/db/09-db-performance/subquery)
- [Optimizer](/docs/db/09-db-performance/optimizer)
- [인덱스](/docs/db/09-db-performance/index-types)

---

## 학습 체크리스트

- [ ] 조인과 서브쿼리 차이 이해
- [ ] 구조측면/사용측면 비교 암기
- [ ] 실무 적용 사례 파악

---

## 참고자료

- 정보관리기술사 데이터베이스 학습자료

