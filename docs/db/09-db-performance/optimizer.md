---
layout: default
title: Optimizer
parent: 9. DB 성능
grand_parent: DB (데이터베이스)
nav_order: 2
---

# 데이터베이스 옵티마이저 (Optimizer)
{: .fs-8 }

9.2 쿼리 최적화기
{: .label .label-purple }

---

## 핵심 키워드

`Query Rewrite(질의 변환)` `Query Optimization(비용 산정)` `QEP Generation(실행 계획)` `RBO` `CBO`

---

## 정의/개념

SQL문 처리, 실행계획 탐색, 비용 추정, 수립 DBMS 핵심 엔진

---

## 처리 절차

```
        Query
          │
          ▼
       ┌──────┐      ┌──────────────┐
       │Parse │ ───▶ │Query Rewrite │
       └──────┘      └──────┬───────┘
                            │
                            ▼
                     ┌──────────────┐
       ┌─────────────│    Query     │
       │             │ Optimization │
       │             │  RBO   CBO   │
       │             └──────────────┘
       │                    │
       ▼                    ▼
   ┌────────┐        ┌─────────────┐
   │ Result │ ◀───── │    QEP      │
   └────────┘        │ Generation  │
                     └─────────────┘
```

---

## 질의 처리 단계

| 질의 처리 단계 | 핵심 기능 | 설명 |
|:--------------|:---------|:-----|
| **Query Rewrite** | 질의 변환기 | 서브 질의와 뷰의 병합을 수행하고, OR Expansion 작업을 수행<br>서브질의와 뷰 병합: 옵티마이저가 더욱 효과적인 QEP를 찾기 위하여 더 효과적인 플랜이 있는지 그 가능성을 확인하는 과정 |
| **Query Optimization** | 비용 산정기 | 질의에 대한 액세스 경로를 결정 |
| **QEP Generation** | 실행 계획 생성기 | 질의실행계획(QEP/Query Execution Plan)<br>질의를 실행하는데 필요한 상세한 정보를 생성 |

---

## RBO vs CBO 개념 비교

| 구분 | RBO | CBO |
|:-----|:----|:----|
| **정의** | 인덱스구조나 비교연산자에 따른 순위부여를 기준으로 최적의 경로를 설정하는 옵티마이저 | 데이터 건수, 블록 수, 데이터 분포도 등 데이터 통계 정보를 기반으로 하여 처리에 대한 최적의 비용이 들어가는 실행 계획을 수립하는 옵티마이저 |
| **특징** | 사전에 정의된 규칙에 따라 실행<br>사후에 RBO 규칙을 변경하기 어려움 | 최적화된 결정을 위해 정기적 통계정보 갱신 필요함<br>실행계획을 미리 예측하기 힘듬 |

---

## RBO vs CBO 상세 비교

| 구분 | RBO | CBO |
|:-----|:----|:----|
| **경로선택** | 인덱스 구조나 비교 연산자에 따른 순서 여부를 기준으로 최적 경로 설정 | 처리 방법에 대한 비용을 산정한 후 최소 비용이 소요되는 방법 선택 |
| **인덱스 기준** | 인덱스 존재 시 항상 사용 | Cost에 의한 결정 |
| **최적화 기준** | 실행 우선 순위(Ranking) | 액세스 비용(Cost) |
| **동작 방식** | 15개 RULE 기반으로 처리 | 시스템 통계정보에 따른 비용 산정 후 처리 |
| **장점** | 예측 가능하여 사용자가 원하는 처리 경로 유도가 용이함 | 현실을 감안한 판단, 통계정보의 관리를 통한 최적화 제어 |
| **단점** | 통계정보라는 현실 요소 무시하여 판단의 오차가 크게 날 수 있음 | 실행 계획을 미리 예측, 제어가 어려움 |

---

## 연계 토픽

- [DB 튜닝](/docs/db/09-db-performance/db-tuning)
- [인덱스](/docs/db/09-db-performance/index-types)
- [Scan 방식](/docs/db/09-db-performance/scan-methods)

---

## 학습 체크리스트

- [ ] 옵티마이저 처리 절차 이해
- [ ] RBO와 CBO 차이점 암기
- [ ] 실무 적용 사례 파악

---

## 참고자료

- 정보관리기술사 데이터베이스 학습자료

