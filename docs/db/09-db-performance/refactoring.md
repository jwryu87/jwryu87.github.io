---
layout: default
title: 리팩토링
parent: 9. DB 성능
grand_parent: DB (데이터베이스)
nav_order: 8
---

# 데이터베이스 리팩토링 (Refactoring)
{: .fs-8 }

9.8 데이터베이스 리팩터링
{: .label .label-purple }

---

## 핵심 키워드

`구조 리팩토링` `기능 리팩토링` `아키텍처 리팩토링` `DB 스멜`

---

## 정의/개념

DataBase의 Semantic의 변화 없이 Schema의 변경을 통해 관리 편의성이나 속도, 정합성 개선을 확보하는 데이터베이스 최적화작업

---

## 순서/주요기법

```
  ┌────────────────┐    ┌────────────────┐    ┌────────────────┐
  │      ①        │    │      ②        │    │      ③        │
  │   DB Smell    │ → │  적합한 Refac- │ → │   단위 테스트   │
  │   파악 Refac-  │    │  toring 유형   │    │     작성       │
  │   toring 필요  │    │   및 기법 선택 │    │                │
  │   검증         │    │                │    │                │
  └────────────────┘    └────────────────┘    └────────────────┘
                                                     │
                              ┌──────────────────────┤
                              │                      │
                              ▼           PASS      ▼
  ┌────────────────┐    ┌─────┴──────┐    ┌────────────────┐
  │      ⑥        │    │    ⑤      │    │      ④        │
  │   DB 스키마    │ ← │  테스트    │ ← │   이전 버전    │
  │   백업 및 수정 │    │   수행     │    │     작업       │
  │   Data 백업 및 │    │            │    │                │
  │   Migration   │    │            │    │                │
  │   수행        │    │            │    │                │
  │   Application │    │            │    │                │
  │   백업 및 수정 │    │     FAIL   │    │                │
  └────────────────┘    └────────────┘    └────────────────┘
```

---

## 주요 기법

| 구분 | 핵심 | 설명 |
|:-----|:-----|:-----|
| **구조 리팩토링** | 데이터베이스 스키마의 테이블 구조를 변경 | Merge: table, column<br>Drop: table, view |
| **데이터 품질 리팩토링** | 데이터베이스에 저장되어 있는 값의 일관성 및 사용성 개선 | Standard codes<br>Default 값이용 |
| **기능 리팩토링** | 저장 프로시저의 품질, 저장 기능, 트리거를 개선 변경 | Consolidate Conditional Expression |
| **참조 무결성 리팩토링** | 참조된 컬럼에 대한 무결성 보장을 위한 제약조건 추가 | 외래키 및 Constraint 추가<br>계산컬럼에 트리거를 적용 |
| **아키텍처 리팩토링** | 외부 프로그램이 데이터베이스와 상호 작용하는 전반적인 방법 개선 | Encapsulate Table With View<br>Migrate Method to Database |

---

## DB 스멜 (Code Smell)의 정의

| 항목 | 설명 |
|:-----|:-----|
| **데이터 품질문제 해결** | 잘못된 비즈니스 분석이나 운영간 업무 프로세스의 변화, 데이터의 누적 등으로 인해 발생 |
| **데이터 최적화** | 현재 DBMS 운영간 큰 문제점을 발생하지 않고 있으나, 향후 더 심오한 문제를 일으킬 가능성이 존재하는 어떤 징세 |
| **데이터 정조 최적화 목적** | 데이터 구조 최적화를 통해 데이터 품질 문제를 근본적으로 해결하여 Agile 개발을 지원하기위해 제거해야 할 대상 |

---

## 연계 토픽

- [DB 튜닝](/docs/db/09-db-performance/db-tuning)
- [정규화](/docs/db/03-modeling-design/normalization)
- [역정규화](/docs/db/03-modeling-design/denormalization)

---

## 학습 체크리스트

- [ ] 리팩토링 절차 이해
- [ ] 주요 기법 5가지 암기
- [ ] DB 스멜 개념 파악

---

## 참고자료

- 정보관리기술사 데이터베이스 학습자료

