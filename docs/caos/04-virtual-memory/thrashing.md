---
layout: default
title: 스레싱
parent: 4. 가상메모리
grand_parent: CAOS (컴퓨터구조/OS)
nav_order: 8
---

# 스레싱 (Thrashing)
{: .fs-8 }

4.3 문제/최적화
{: .label .label-red }

---

## 핵심 키워드

`원인(리소스 부족, 부적절 페이지 교체, 과도한 멀티프로그래밍)` `해결방안(Working Set, PFF)`

---

## 정의/개념

**스레싱(Thrashing)**은 CPU가 멀티 프로세싱 환경에서 가상메모리의 **페이지 부재가 자주 발생**하여 프로세스 실행보다 페이지 교체에 더 많은 시간을 소요하는 **비정상적인 현상**입니다.

---

## 스레싱 메커니즘

```
CPU     ▲   정상 CPU
이용률  │    이용률
        │         ┌────────
        │        /
        │       /
        │      /   스레싱
        │     /
        │    /
        │   /
        │  /
        │ /
        └──────────────────────▶
              다중 프로그래밍 정도
```

---

## 스레싱 발생원인

| 발생 원인 | 세부 원인 | 설명 |
|:---------|:---------|:-----|
| **리소스** | 저사양 CPU | CPU의 Core 개수 및 속도 리소스 부족 |
| | 메모리 용량 부족 | 메모리 용량 부족으로 인한 가상메모리 사용 증가 |
| **부적절한 페이지 교체 정책** | Locality 미고려 | 페이지 교체 정책의 효율성 저하 |
| | 페이지 빈도 미고려 | 페이지 교체에 대한 빈번한 시간 지연 문제 발생 |
| **과도한 멀티프로그래밍** | 다중 프로세스 수용 초과 | 과도한 멀티 프로그램으로 잦은 페이지 부재 발생 |
| | 페이지 교체 수용 초과 | 수용 가능한 페이지수 초과에 따른 잦은 페이지 부재 발생 |

---

## 스레싱 해결방안

### 가. 지역성 기반으로 스레싱 예방, 워킹셋(Working Set)

- **페이지 부재율을 감소**하기 위해 특정 시간에 실행되는 프로그램에 지역성(Locality)이 포함되는 페이지들의 집합을 계속 메모리에 상주시켜 스레싱을 해결하는 기법

| 구성요소 | 설명 |
|:---------|:-----|
| **Reference Page** | 메모리 공간에 참조되는 페이지<br>참조 페이지가 많아질수록 스레싱(Thrashing)이 유발 |
| **Working Set Size** | 프로세스 처리 시간에 따라 Working Set Size 변화<br>프로세서의 Swap in/out을 적절히 사용해 워킹셋 충족 |
| **Working Set Window** | 크기에 따른 Locality<br>메모리상에 참조하는 고정 페이지의 수<br>Working set의 릿지를 위해서 Window size 최적화 필요 |

### 나. PFF(Page Fault Frequency) 설정

- **페이지 부재율에 따른 주기억장치의 페이지 프레임 수를 증가 일단하거나**, 감페이지 부재율 수준으로 유지하는 스레싱 대응 기법

| 동작방법 | 설명 |
|:---------|:-----|
| **상한선 (Upper Bound)** | Page Fault Rate > 상한선<br>→ 프로세스 페이지 프레임을 수가 얼마에에 적정범위 유지 |
| **하한선 (Lower Bound)** | Page Fault Rate < 하한선<br>→ 프로세스 페이지 프레임을 회수하여 적정범위 유지 |

---

## 스레싱 예방방안

| 구분 | 예방기법 |
|:-----|:---------|
| **운영체제 설정측면** | 페이지 사이즈 결정 |
| **프로그램 설계측면** | Locality 고려 |

---

## 연계 토픽

- [페이지 교체 알고리즘](/docs/caos/04-virtual-memory/page-replacement)
- [지역성](/docs/caos/04-virtual-memory/locality)

---

## 학습 체크리스트

- [ ] 스레싱 발생 원인
- [ ] Working Set 개념
- [ ] PFF 동작 방식

---

## 참고자료

- 정보관리기술사 컴퓨터구조/OS 학습자료

