---
layout: default
title: 가상메모리 단편화
parent: 4. 가상메모리
grand_parent: CAOS (컴퓨터구조/OS)
nav_order: 5
---

# 가상메모리 단편화
{: .fs-8 }

4.3 문제/최적화
{: .label .label-red }

> 암기: **해결방안(통압메슬버)**

---

## 핵심 키워드

`낭비되는 공간` `내부단편화` `외부단편화` `통합` `압축` `메모리 풀` `버디 메모리 시스템` `슬랩 할당자`

---

## 정의/개념

**가상메모리 단편화**는 메모리 상에서 프로그램에 의해 사용되지 못하고 **낭비되는 공간 발생 현상**입니다.

---

## 가상메모리 단편화 유형

### 내부 단편화

```
┌────────┬────────┬────────┐
│  50KB  │  50KB  │  50KB  │  ← 할당완료
├────────┴────────┴────────┤
│  고정된 분할공간 내 미사용 공간 → 내부단편화 공간  │
└─────────────────────────────────────────────────┘
```

- 분할된 공간에 프로그램 적재 후 남는 공간
- 프로그램이 요구한 것보다 더 큰 공간을 할당할 경우 낭비되는 부분

### 외부 단편화

```
     메인 메모리(가변분할, 세그먼트 기법)      프로그램 할당 불가
┌────┬────┬────┬────┬────────────────────┐
│60KB│90KB│50KB│35KB│                    │  프로그램
├────┼────┼────┼────┤                    │    40KB
│    │    │    │    │  할당완료          │
│15KB│10KB│25KB│                        │
└────┴────┴────┴────────────────────────┘
                ↑
          빈공간 → 외부단편화 발생
```

- 분할된 크기가 프로그램 크기보다 작아서 할당할 수 없는 공간
- 프로그램이 요구하는 만큼의 메모리를 할당하고, 이후 메모리에 프로그램이 지속적으로 할당, 교체되어 사용하기 어려운 작은 공간이 발생하게 됨

---

## 가상메모리 단편화 해결방안

| 해결방안 | 설명 |
|:---------|:-----|
| **통합 (Coalescing)** | 인접해 있는 단편화 된 공간을 하나의 공간으로 통합 |
| **집약/압축** | 주기억장치 내 분산되어 있는 단편화 공간을 결합하여 하나의 큰 가용 공간으로 생성 (=Garbage Collection) |
| **가상메모리 관리기법 활용** | - 페이징 기법 : 동일 크기의 프레임으로 구성(외부단편화 방지)<br>- 세그먼트 기법 : 가변 크기의 블럭 구성(내부단편화 방지) |
| **Memory Pool 활용** | 메모리 요청을 각 객체 크기대로 나누고 포인터를 기반으로 관리 |
| **Buddy System** | 고정분할, 가변분할로 인한 단편화 방지를 보완한 절충시스템<br>사용하지 않는 모든 페이지프레임을 그룹화 |
| **Slab Allocator** | 페이지 프레임을 할당 받아 공간을 작은 크기로 분할하고, 메모리 요청 시 작은 크기로 메모리 할당/해제 동적 메모리 관리 기법 |

---

## 연계 토픽

- [페이징 기법](/docs/caos/04-virtual-memory/paging)
- [세그멘테이션 기법](/docs/caos/04-virtual-memory/segmentation)

---

## 학습 체크리스트

- [ ] 내부/외부 단편화 차이
- [ ] 해결방안 5가지 이해
- [ ] Buddy System, Slab Allocator 개념

---

## 참고자료

- 정보관리기술사 컴퓨터구조/OS 학습자료

