---
layout: default
title: MESI 프로토콜
parent: 5. 캐시메모리
grand_parent: CAOS (컴퓨터구조/OS)
nav_order: 3
---

# MESI 프로토콜
{: .fs-8 }

5.2 일관성
{: .label .label-yellow }

> 암기: **수배공무**

---

## 핵심 키워드

`Cache Coherence` `Modify` `Exclusive` `Shared` `Invalid`

---

## 정의/개념

**MESI 프로토콜**은 캐시 일관성 유지 위해 별도의 **Flag를 할당**한 후 **Flag**의 상태를 확인하여 데이터의 유효 여부를 판단할 수 있는 **프로토콜**입니다.

---

## MESI 상태

| 구분 | 세부 상태 | 설명 |
|:-----|:---------|:-----|
| **수정 (Modify)** | 데이터가 수정(변경)된 상태 | 캐시내의 라인이 수정되었으며(주기억장치와 다르며), 그 라인은 이 캐시에만 있음 |
| **배타 (Exclusive)** | 유일한 복사본, 주기억 장치와 동일 | 캐시 내의 라인은 주기억장치에 있는 것과 동일하며, 다른 캐시에는 존재하지 않음 |
| **공유 (Shared)** | 두개 이상 캐시에 데이터가 적재 | 캐시 내의 라인은 주기억장치에 있는 것과 동일하며, 다른 캐시에도 있을 수 있음 |
| **무효 (Invalid)** | 다른 프로세스에 의해 수정된 데이터 | 캐시 내의 라인은 유효한 데이터를 포함하지 않음 |

---

## 메커니즘 (상태 전이 다이어그램)

```
                    (8) Write miss
           ┌────────────────────────────┐
           │                            │
           ▼      (2) Write hit         │
    ┌──────────┐ ──────────────▶ ┌──────────┐
    │    I     │                 │    E     │ ◀─── (1) Read miss
    │ Invalid  │ ◀──────────────│ Exclusive │
    └──────────┘  (7) Read miss  └────┬─────┘
           ▲                          │
           │   (7) Read miss          │ (3) Read miss
           │                          │
    (8) Write miss                    ▼
           │      (4) Cache miss ┌──────────┐
           │  ┌─────────────────│    S     │ ◀─── (3),(4) Read miss
           │  │                  │  Shared  │
    ┌──────┴──┴──┐ (5) Invalidate└────┬─────┘
    │     M      │ ◀─────────────────┘
    │  Modify    │
    └────────────┘
        │    ▲
        │    │
        └────┘ (6) Write hit

    ────▶ : 프로세스 동작에 의한 전이
    ────▶ : 다른 캐시의 변화에 의한 전이
```

---

## 프로토콜 유형 비교

| 프로토콜 | MSI | MEI | MOESI | MESIF |
|:---------|:----|:----|:------|:------|
| **특징** | - Write 무효화 필요<br>- 첫 Read도 공유 상태 | - 데이터 읽기 비용 큼<br>- 공유상태 없음 | - Owned 상태 추가<br>- 메모리 갱신 없음<br>- MESI + MOSI | - Forwarding 상태 추가 |

---

## 연계 토픽

- [캐시 일관성](/docs/caos/05-cache-memory/cache-coherence)
- [스누피 프로토콜](/docs/caos/05-cache-memory/snoopy-protocol)

---

## 학습 체크리스트

- [ ] M, E, S, I 상태 이해
- [ ] 상태 전이 과정
- [ ] 프로토콜 유형 비교

---

## 참고자료

- 정보관리기술사 컴퓨터구조/OS 학습자료

