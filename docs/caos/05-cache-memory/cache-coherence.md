---
layout: default
title: 캐시 일관성
parent: 5. 캐시메모리
grand_parent: CAOS (컴퓨터구조/OS)
nav_order: 2
---

# 캐시 일관성 (Cache Coherence)
{: .fs-8 }

5.2 일관성
{: .label .label-yellow }

---

## 핵심 키워드

`공유 메모리` `로컬 캐시`

---

## 정의/개념

**캐시 일관성(Cache Coherence)**은 공유 메모리 시스템에서 각 **프로세서** 가진 **로컬 캐시간의 일관성**입니다.

---

## 메커니즘

```
┌───────────────┐  ┌───────────────┐  ┌───────────────┐
│  프로세서 #1   │  │  프로세서 #2   │  │  프로세서 #3   │
├───────────────┤  ├───────────────┤  ├───────────────┤
│   로컬 캐시    │  │   로컬 캐시    │  │   로컬 캐시    │
└───────┬───────┘  └───────┬───────┘  └───────┬───────┘
        │                  │                  │
        └──────────────────┼──────────────────┘
                           │
               ┌───────────┴───────────┐
               │   공유버스(Shared Bus)  │
               └───────────┬───────────┘
                           │
               ┌───────────┴───────────┐
               │   메인 메모리 (공유 메모리) │
               └───────────────────────┘
```

---

## 필요성

| # | 필요성 | 핵심 |
|:--|:-------|:-----|
| 1 | 데이터 불일치 방지 | 캐시간의 데이터 불일치 발생 방지 |
| 2 | 일관성 보장 | 로컬 캐시간의 일관성 보장 |
| 3 | 성능 향상 | 멀티 프로세서 환경 안전 사용 보장 |
| 4 | 지연 최소화 | 캐시 Miss 발생 확률 최소 지연 시간 최소화 |

---

## 불일치 해결 방안

```
              캐시일관성
               유지기법
           ┌──────┴──────┐
       S/W방식        H/W방식
      ┌────┴────┐    ┌────┴────┐
    공유    공유 변수   디렉토리   스누피
    캐시    캐시 미사용  프로토콜   프로토콜
```

| 방식 | 기법 | 설명 |
|:-----|:-----|:-----|
| **S/W 방식** | 공유 캐시 | 여러 프로세서가 하나의 캐시 공유 |
| | 공유 변수 캐시 미사용 | 공유 변수는 캐시하지 않음 |
| **H/W 방식** | 디렉토리 프로토콜 | 중앙 디렉토리로 상태 관리 |
| | 스누피 프로토콜 | 버스 감시로 일관성 유지 |

- H/W 방식 기법은 S/W 방식 기법보다 복잡하지만 캐시 이용률이 높은 장점이 있음

---

## 연계 토픽

- [MESI 프로토콜](/docs/caos/05-cache-memory/mesi-protocol)
- [Cache Memory Write](/docs/caos/05-cache-memory/cache-memory-write)

---

## 학습 체크리스트

- [ ] 캐시 일관성 필요성
- [ ] S/W vs H/W 방식 비교
- [ ] 스누피 프로토콜 개념

---

## 참고자료

- 정보관리기술사 컴퓨터구조/OS 학습자료

