---
layout: default
title: 호위효과/노화
parent: 1. CPU 스케줄링
grand_parent: CAOS (컴퓨터구조/OS)
nav_order: 2
---

# CPU 스케줄링 호위효과(Convoy Effect), 노화(Aging)
{: .fs-8 }

1.2 효과/문제
{: .label .label-yellow }

---

## 핵심 키워드

`Longer Job` `Shorter Job` `FCFS` `SJF` `HRN`

---

## CPU 스케줄링 주요 문제

CPU 스케줄링에서 **Convoy Effect**, **Starvation** 등의 문제점이 발생하며 이를 해결하기 위해서 SJF, 우선순위, 기한부, HRN, Aging 등을 적용하여 해결합니다.

```
                    ┌─────────────────────────────────────┐
                    │                                     │
    ┌───────┐   Aging으로 해결   Aging으로 해결   ┌────┐
    │ FCFS  │───────┬───────────────┬───────────│ RR │
    └───┬───┘       │               │           └────┘
        │      ┌────┴────┐     ┌────┴────┐
   Convoy      │   HRN   │     │   MFQ   │      Job
   Effect      └─────────┘     └─────────┘    특성반영
        │           │               │           │
  평균대기         │          선점 도입          │
  시간증가         │               │         ┌──┴──┐
        │     ┌────┴────┐     ┌────┴────┐   │ MQ  │
    ┌───┴───┐ │   SJF   │     │   SRT   │   └─────┘
    │       │ └─────────┘     └─────────┘
    │       │       │               │
    │       │  Starvation유발  Starvation유발
    │       │
    └───────┴─── 비선점 ──────────── 선점 ─────────
```

---

## 호위효과 (Convoy Effect)

### 정의

**FCFS의 문제점**인 **호위효과(Convoy Effect)**의 정의는 **먼저 도착한 프로세스가 CPU에서 수행되는 버스트(실행)시간이 매우 길면**, 다음 도착한 프로세스가 첫번째 프로세스가 끝날 때까지 **매우 긴 시간을 기다려야** 하며 **CPU 이용률이 저하되는 현상**입니다.

### 호위효과 시각화

```
    The Convoy Effect, Visualized Starvation

    ┌────────────────────────────────────────────────┐
    │                                                │
    │  ┌─────────────┐   ┌───┐ ┌───┐ ┌───┐ ┌───┐   │
    │  │  Longer Job │ ← │   │ │   │ │   │ │   │   │
    │  └─────────────┘   └───┘ └───┘ └───┘ └───┘   │
    │                      Shorter Jobs             │
    │                                               │
    └────────────────────────────────────────────────┘
```

### 호위효과 발생조건

- FCFS 스케줄링에서 발생
- 하나의 Longer Job, 여러 개의 Shorter Jobs
- 먼저 도착한 1개의 매우 Longer Job이 먼저 수행

### 호위효과 해결방안

| 해결방안 | 설명 |
|:---------|:-----|
| **SJF** | - Shorter job 최우선<br>- 실행시간 추정치 적은 작업 먼저 수행, 평균 대기 시간 최소화<br>- 무한 대기 방지를 위한 Aging 기법 적용 필요 |
| **HRN** | - SJF의 단점(긴 작업과 짧은 작업의 불평등) 보완<br>- 응답률 = (대기시간 + 서비스시간) / 서비스 시간 |
| **Deadline** | - 명시된 시간까지 완료되도록 계획 |
| **Priority** | - 프로세스 별 우선순위 부여 |

---

## 기아상태(Starvation)와 노화(Aging)

### 기아상태(Starvation)의 정의

- Job의 **priority가 낮아서** CPU를 할당 받지 못해서 Job을 처리하지 못해 **대기 상태가 지속**되는 프로세스 상태

### 노화(Aging)의 정의

- **무한대기 및 기아상태(Starvation) 해결 기법**, 노후화(Aging)
- 낮은 우선순위의 프로세스들의 무한 대기 문제에 대한 해결책
- 오랫동안 시스템에서 대기하는 프로세스들의 **우선순위를 점진적으로 증가**시키는 방법
- Starvation을 방지하기 위해서 대기 시간이 **오래된 프로세스에 대해 Priority를 높여주어** 처리 보장하는 CPU 스케줄링 기법

### Aging 적용 기법

| Aging 기법 | 설명 |
|:-----------|:-----|
| **비선점 대표** | Aging 적용 알고리즘 |
| **HRN** | - HRN(Highest Response ratio Next) 스케줄링은 SJF의 약점인 긴 작업과 짧은 작업간의 지나친 불평등을 보완한 기법<br>- 짧은 작업이나 대기 시간이 큰 작업은 우선순위가 높아짐<br>- SJF의 단점(긴 작업과 짧은 작업의 불평등) 보완<br>- 응답률 = (대기시간 + 서비스시간) / 서비스 시간 |
| **MFQ** | - 프로세스들은 CPU의 사용시간에 따라 입출력 위주와 CPU 위주로 구분되는데 이를 기준으로 서로 다른 할당시간을 부여<br>- 새로운 프로그램이 들어오면 높은 우선순위를 할당하여 단계 1에서 즉시 수행하고, 점차 낮은 우선순위를 부여하며 마지막 단계 n에서는 그 작업이 완료될 때까지 라운드 로빈으로 순환 |

---

## 연계 토픽

- [CPU 스케줄링](/docs/caos/01-cpu-scheduling/cpu-scheduling)
- [우선순위 역전](/docs/caos/01-cpu-scheduling/priority-inversion)

---

## 학습 체크리스트

- [ ] 호위효과 발생 원인 이해
- [ ] 기아상태 개념 이해
- [ ] Aging 기법 적용 방법
- [ ] HRN 응답률 계산

---

## 참고자료

- 정보관리기술사 컴퓨터구조/OS 학습자료

