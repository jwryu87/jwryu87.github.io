---
layout: default
title: Tor 네트워크
parent: 네트워크 보안
grand_parent: 보안
nav_order: 4
---

# Tor 네트워크 (The Onion Router)
{: .fs-8 }

16.4 네트워크 보안
{: .label .label-yellow }

---

## 핵심 키워드

`겹층 암호화 사용` `Onion Router 구성` `트래픽 분석` `IP 주소 추적 불가능` `익명성`

---

## 정의/개념

온라인 상에서 **트래픽 분석이나, IP주소 추적을 불가능하게 하여** 프라이버시와 보안을 보장하는 **익명성 네트워크** (anonymous communication)

---

## 개념도

```
┌───────────────────────────────────────────────────────────────────────────┐
│                                                                           │
│  ┌────────┐    ┌────────────────┐    ┌────────────────┐    ┌──────────┐  │
│  │        │    │  OR(Onion      │    │  OR(Onion      │    │          │  │
│  │ Client │───▶│   Router)      │───▶│   Router)      │───▶│  Server  │  │
│  │        │    │  입구노드       │    │  출구노드       │    │          │  │
│  └────────┘    │(entry node)    │    │(exit node)     │    │          │  │
│      │         └────────────────┘    └────────────────┘    └──────────┘  │
│      │               ▲                       │                           │
│      │               │                       │                           │
│      │         ┌─────┴──────────────────────┘                           │
│      │         │                                                         │
│      │         │    서킷 번역 파라미터 암구    OR(Onion Router)            │
│      │         │    번 암호화하고 전달하여    (middle node)               │
│      │         │    수신자를 지                                          │
│      │         │                                                         │
│      ▼         ▼                                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐ │
│  │ Directory Authority - 라우터 정보를 관리 및 배포                      │ │
│  │ (디렉터리 서버)                                                       │ │
│  └─────────────────────────────────────────────────────────────────────┘ │
│                                                                           │
└───────────────────────────────────────────────────────────────────────────┘
```

- 계층별로 IPSec VPN, SSL VPN 터널링 구성으로 전체 시스템, 네트워크 보안성을 확보

---

## Tor 네트워크 구성요소

| 구성요소 | 설명 |
|:---------|:-----|
| **Cell** | - Tor를 통과하는 고정된 크기의 패킷 전송 단위(512바이트)<br>- 원본 메시지를 Tor 시스템에 맞게 재구성한 메시지를 말함 |
| **Circuit** | - 각각의 TCP Stream에 대한 한 번의 완전한 라우팅(경로)<br>- 통상 3개의 OR로 구성됨(입구, 중간, 출구노드) |
| **OR (Onion Router)** | - Tor 네트워크 내 각 노드를 의미 |
| **OP (Onion Proxy)** | - 오니언 프락시(onion proxy)는 Tor의 사용자 어플리케이션이 설치되어 있는 노드를 말함<br>- Circuit을 생성하고 연결을 관리하는데 사용하는 프록시<br>- 주기적인 Circuit의 설정과 해제역할 담당 |
| **Directory 서버 (Directory Authorities server)** | - 디렉터리 오소리티(directory authority)는 라우터들의 정보를 취합한 데이터를 관리 및 배포하는 노드<br>- OR의 정보 및 Circuit에 대한 정보를 담고 있는 서버 |

- 주로 NVT(Network Video Transmitter) 와 NVC(Network Video Client) 사이에서 사용하는 서비스

---

## Tor 동작 원리

### 겹층(Onion) 암호화

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  원본 메시지                                                     │
│  ┌───────────────────────────────────────────────────────────┐ │
│  │                        메시지                              │ │
│  │  ┌─────────────────────────────────────────────────────┐  │ │
│  │  │          출구노드 암호화                              │  │ │
│  │  │  ┌───────────────────────────────────────────────┐ │  │ │
│  │  │  │        중간노드 암호화                          │ │  │ │
│  │  │  │  ┌─────────────────────────────────────────┐ │ │  │ │
│  │  │  │  │      입구노드 암호화                      │ │ │  │ │
│  │  │  │  └─────────────────────────────────────────┘ │ │  │ │
│  │  │  └───────────────────────────────────────────────┘ │  │ │
│  │  └─────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│  각 노드에서 한 겹씩 복호화 → 양파 껍질 벗기기                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Tor vs VPN 비교

| 구분 | Tor | VPN |
|:-----|:----|:----|
| **익명성** | 높음 (다중 노드) | 중간 (단일 서버) |
| **속도** | 느림 | 빠름 |
| **신뢰 모델** | 분산 신뢰 | 단일 서버 신뢰 |
| **추적 방지** | IP 완전 은닉 | IP 변경만 |
| **암호화** | 다층 암호화 | 단일 암호화 |
| **용도** | 고도의 익명성 필요 시 | 일반 프라이버시 |

---

## 보안 고려사항

{: .warning }
> Tor는 익명성을 제공하지만, 출구 노드에서 암호화되지 않은 트래픽은 노출될 수 있음

| 취약점 | 설명 |
|:-------|:-----|
| **출구 노드 스니핑** | 출구 노드에서 HTTPS가 아닌 트래픽 감청 가능 |
| **악성 노드** | 악의적인 OR 운영자에 의한 공격 |
| **트래픽 분석** | 입구/출구 노드 동시 모니터링 시 상관관계 분석 |
| **DNS 유출** | 잘못된 설정으로 DNS 쿼리 유출 |

---

## 연계 토픽

- [VPN](/docs/sec/16-network-security/vpn)
- [IP 터널링](/docs/sec/16-network-security/ip-tunneling)
- [다크 웹](/docs/sec/16-network-security/)

---

## 학습 체크리스트

- [ ] Tor 네트워크의 정의와 목적 이해
- [ ] 구성요소(Cell, Circuit, OR, OP) 이해
- [ ] 겹층(Onion) 암호화 원리 이해
- [ ] VPN과의 차이점 구분

---

## 참고자료

- 정보관리기술사 보안 학습자료

