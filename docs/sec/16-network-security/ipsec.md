---
layout: default
title: IPsec
parent: 네트워크 보안
grand_parent: 보안
nav_order: 2
---

# IPsec (IP Security)
{: .fs-8 }

16.2 네트워크 보안
{: .label .label-yellow }

---

## 핵심 키워드

`AH` `ESP` `전송 모드` `터널 모드` `IKE` `인증` `기밀성`

---

## 정의/개념

NW 계층에서 **인증헤더(AH)와 암호화 캡슐화(ESP)**를 통해, **무결성/인증/기밀성 보장**하는 IP 보안 프로토콜

---

## 구성요소

### 프로토콜

| 구분 | 구성 요소 | 설명 |
|:-----|:----------|:-----|
| **프로토콜** | AH (Authentication Header) | 데이터 인증, 무결성 보장, 재전송 공격 방지 |
| | ESP (Encapsulating Security Payload) | 데이터 인증, 무결성, 기밀성 제공, 도청 방지 |

### 동작 모드

| 구분 | 구성 요소 | 설명 |
|:-----|:----------|:-----|
| **동작 모드** | 전송 모드 (Transport Mode) | 페이로드(Payload)에 대한 무결성/기밀성 제공 |
| | 터널 모드 (Tunneling Mode) | IP패킷 전체에 대한 무결성/기밀성 제공 |

### 정책

| 구분 | 구성 요소 | 설명 |
|:-----|:----------|:-----|
| **정책** | 보안 정책 SP (Security Policy) | 송수신 IP 패킷의 패기, 통과 등 IPsec 처리 정책 |
| | 보안정책 DB SPD (Security Policy Database) | 보안정책(SP)을 저장하는 DB |
| | 보안 연관 SA (Security Association) | IPsec 장비간 프로토콜(AH, ESP)의 파라미터 정의<br>파라미터 : 알고리즘, 모드, 키 등 |
| | 보안 연관 DB SAD (Security Association Database) | SA의 파라미터 값을 저장하는 DB |

### 키관리

| 구분 | 구성 요소 | 설명 |
|:-----|:----------|:-----|
| **키관리** | IKE (Internet Key Exchange) | 키 교환 알고리즘 등, 키 교환 관련 SA 생성 |
| | ISAKMP (Internet Security Association and Key Management Protocol) | 키 교환/인증 프로토콜<br>SA의 생성, 수정, 삭제 절차 정의 |

---

## 동작모드

### 전송 모드 (Transport Mode)

```
┌─────────────────────────────────────────────────────────────┐
│                         인증 구간                            │
│                     인증 후 AH 헤더 추가                      │
│  ┌─────────┬─────────┬────────────────────────────────────┐ │
│  │ IP 헤더 │   AH    │           페이로드                  │ │
│  └─────────┴─────────┴────────────────────────────────────┘ │
│         AH                                                   │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│              2. 인증 구간            │       인증값 추가     │
│                           1. 암호화 구간                     │
│  ┌─────────┬─────────┬───────────────┬─────────┬─────────┐ │
│  │ IP 헤더 │   ESP   │   페이로드     │   ESP   │   ESP   │ │
│  │         │  헤더   │               │ Trailer │  Auth   │ │
│  └─────────┴─────────┴───────────────┴─────────┴─────────┘ │
│         ESP                                                  │
└─────────────────────────────────────────────────────────────┘
```

### 터널 모드 (Tunnel Mode)

```
┌─────────────────────────────────────────────────────────────┐
│                         인증 구간                            │
│                     인증 후 AH 헤더 추가                      │
│  ┌──────────┬─────────┬─────────┬────────────────────────┐  │
│  │ 새로운 IP│   AH    │ IP 헤더 │        페이로드         │  │
│  │  헤더    │         │         │                        │  │
│  └──────────┴─────────┴─────────┴────────────────────────┘  │
│         AH                                                   │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│              2. 인증 구간                   │   인증값 추가  │
│                           1. 암호화 구간                     │
│  ┌──────────┬─────────┬─────────┬───────┬─────────┬──────┐ │
│  │ 새로운 IP│   ESP   │   IP    │페이로드│   ESP   │ ESP  │ │
│  │  헤더    │  헤더   │  헤더   │       │ Trailer │ Auth │ │
│  └──────────┴─────────┴─────────┴───────┴─────────┴──────┘ │
│         ESP                                                  │
└─────────────────────────────────────────────────────────────┘
```

---

## AH vs ESP 비교

| 구분 | AH | ESP |
|:-----|:---|:----|
| **인증** | O | O |
| **무결성** | O | O |
| **기밀성** | X | O |
| **재전송 방지** | O | O |
| **프로토콜 번호** | 51 | 50 |
| **IP 헤더 보호** | O (전송모드 제외) | X |

---

## 전송 모드 vs 터널 모드

| 구분 | 전송 모드 | 터널 모드 |
|:-----|:----------|:----------|
| **보호 범위** | 페이로드만 | IP 패킷 전체 |
| **IP 헤더** | 원본 유지 | 새 IP 헤더 추가 |
| **용도** | Host-to-Host | Gateway-to-Gateway |
| **VPN 활용** | End-to-End | Site-to-Site |

---

## 연계 토픽

- [IP 터널링](/docs/sec/16-network-security/ip-tunneling)
- [VPN](/docs/sec/16-network-security/vpn)
- [암호화 분류](/docs/sec/10-cryptography/crypto-classification)

---

## 학습 체크리스트

- [ ] IPsec의 정의와 구성요소 이해
- [ ] AH와 ESP의 차이점 이해
- [ ] 전송 모드와 터널 모드 구분
- [ ] IKE, SA 개념 이해

---

## 참고자료

- 정보관리기술사 보안 학습자료

